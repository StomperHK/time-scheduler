(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();class u{constructor(t,s){this.hour=t,this.minute=s}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}`}increaseTime(t){const s=(this.minute+t)%60;return s<=this.minute?(this.hour=this.hour+1,this.minute=s):this.minute=s,this.toString()}isSmallerThanOrEqual(t){return this.hour<t.hour||this.hour===t.hour&&this.minute<=t.minute}}let E=new f;function f(){this.toasts=[],this.timeouts=new Map}f.prototype.push=function(e,t){requestAnimationFrame(()=>{let s=e.attach(0);this.toasts.forEach(r=>{r.seek(s)}),this.toasts.push(e),this.timeouts.set(e,setTimeout(()=>this.remove(e),t))})};f.prototype.remove=function(e){if(this.timeouts.has(e))clearTimeout(this.timeouts.get(e)),this.timeouts.delete(e);else return;const t=this.toasts.indexOf(e),s=this.toasts.splice(t,1)[0],r=e.element.offsetHeight;s.detach(),this.toasts.slice(0,t).forEach(n=>n.seek(-r))};f.prototype.removeAll=function(){for(;this.toasts.length>0;)this.remove(this.toasts[0])};o.TYPE_INFO="info";o.TYPE_MESSAGE="message";o.TYPE_WARNING="warning";o.TYPE_ERROR="error";o.TYPE_DONE="done";o.TIME_SHORT=2e3;o.TIME_NORMAL=4e3;o.TIME_LONG=8e3;let q={deleteDelay:300};function o(e="No text!",t=o.TYPE_INFO,s=o.TIME_LONG){let r=document.createElement("div"),n=document.createElement("div");r.className="toast",n.className=`body ${t}`,r.appendChild(n),e instanceof Element?n.appendChild(e):n.textContent=`${e}`,this.element=r,this.position=0,E.push(this,s)}o.prototype.attach=function(e){return this.position=e,this.updateVisualPosition(),document.body.appendChild(this.element),requestAnimationFrame(()=>{this.element.classList.add("displayed")}),this.element.offsetHeight};o.prototype.seek=function(e){this.position+=e,this.updateVisualPosition()};o.prototype.updateVisualPosition=function(){requestAnimationFrame(()=>{this.element.style.bottom=-0+this.position+"px"})};o.prototype.detach=function(){let e=this;this.element.parentNode&&(requestAnimationFrame(()=>{this.element.classList.remove("displayed"),this.element.classList.add("deleted")}),setTimeout(()=>{requestAnimationFrame(()=>{!e.element||!e.element.parentNode||e.element.parentNode.removeChild(e.element)})},q.deleteDelay))};o.prototype.delete=function(){E.remove(this)};function m(e,t="normal"){new o(e,t==="normal"?o.TYPE_NORMAL:o.TYPE_ERROR,1500)}const j=document.querySelector("[data-js='user-preferences-button']"),C=document.querySelector("[data-js='user-preferences-modal'] [data-js='save-button']"),U=document.querySelector("[data-js='delete-schedules']"),x=document.querySelector("[data-js='copy-table']"),D=Array.from(document.querySelectorAll("[data-js='close-button']")),F=["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],T=M(B,1500);function M(e,t){let s;return function(){clearInterval(s),s=setTimeout(e,t)}}function B(){const e=document.querySelectorAll('[data-js="schedule"] [data-js="name-input"]');let t={data:{},localUserPreferences:{}};for(const s of e)t.data[s.previousElementSibling.textContent]=s.value;S(p(t.data)),t.localUserPreferences=JSON.parse(localStorage.getItem("schedules")).localUserPreferences,localStorage.setItem("schedules",JSON.stringify(t)),m("Dados Salvos")}function _(){localStorage.getItem("schedules")||localStorage.setItem("schedules",'{"data": {}, "localUserPreferences": {}}'),localStorage.getItem("userPreferences")||localStorage.setItem("userPreferences",'{"openingTime": "08:00", "closingTime": "18:30", "sessionDuration": 30}')}function J(e,t){if(!t){const s=JSON.parse(localStorage.getItem("userPreferences"));e.localUserPreferences=s,localStorage.setItem("schedules",JSON.stringify(e))}}function p(e){let t=0;for(const s in e)e[s]!==""&&t++;return t}function S(e){const t=document.querySelector('[data-js="amount-of-schedules"]');t.textContent=e+" cliente(s) para hoje"}function R(){const e=JSON.parse(localStorage.getItem("userPreferences"));Array.from(document.querySelectorAll("[data-js='user-preferences-modal'] select")).forEach(s=>{s.value=e[s.name]})}function O(e,t=!1){const s=document.createDocumentFragment(),r=document.getElementById("schedule"),n=document.getElementById("schedules"),{openingTime:a,closingTime:l,sessionDuration:N}=e.localUserPreferences,c=new u(...a.split(":").map(i=>Number(i))),L=new u(...l.split(":").map(i=>Number(i))),b={time:new u(12,0),wasCreated:!1},w={time:new u(16,0),wasCreated:!1};for(;c.isSmallerThanOrEqual(L);){const i=r.content.cloneNode(!0),g=i.querySelector('[data-js="time"]'),y=i.querySelector('[data-js="name-input"]'),A=i.querySelector('[data-js="delete-button"]');g.textContent=c.toString(),g.setAttribute("datetime",c.toString()),y.addEventListener("input",T),A.addEventListener("click",Y),c.toString()in e.data&&(y.value=e.data[c.toString()]),c.increaseTime(N),s.appendChild(i),P(c,b,s),P(c,w,s)}t&&(n.innerHTML=""),n.appendChild(s)}function P(e,t,s){if(t.time.isSmallerThanOrEqual(e)&&!t.wasCreated){t.wasCreated=!0;const r=document.createElement("li"),n=document.createElement("time");n.textContent=t.time.toString(),n.setAttribute("datetime",t.time.toString()),r.className="!my-6 text-center font-bold",n.className="text-gray-500 text-xl",r.appendChild(n),s.appendChild(r)}}function Y(e){const s=e.target.closest('[data-js="schedule"]').querySelector('[data-js="name-input"]');s.value="",T()}function v(){document.querySelector("[data-js='user-preferences-modal']").show(),localStorage.setItem("openedUserPreferences",!0)}function k(){const e={};Array.from(document.querySelectorAll("[data-js='user-preferences-modal'] select")).forEach(t=>{e[t.name]=t.name==="sessionDuration"?Number(t.value):t.value}),I(e),localStorage.setItem("userPreferences",JSON.stringify(e)),m("Preferências Salvos")}function I(e){const t=JSON.parse(localStorage.getItem("schedules"));p(t.data)||(t.localUserPreferences=e||JSON.parse(localStorage.getItem("userPreferences")),localStorage.setItem("schedules",JSON.stringify(t)),O(t,!0))}function $(){const e=document.querySelectorAll('[data-js="schedule"] [data-js="name-input"]');for(const t of e)t.value="";localStorage.setItem("schedules",'{"data": {}, "localUserPreferences": {}}'),I(),S(0)}function G(){let e="        "+F[new Date().getDay()]+`
`;const t=JSON.parse(localStorage.getItem("schedules"));for(let s in t)e+=`${s} - ${t[s]}
`;navigator.clipboard.writeText(e).then(()=>{m("Tabela copiada com sucesso!")}).catch(()=>{m("Erro ao copiar a tabela","error")})}function H(e){e.target.closest(".modal").close()}let d;const h=document.querySelector('[data-js="install-pwa-button"]');window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),d=e,h.classList.remove("hidden"),h.addEventListener("click",()=>{d.prompt(),d.userChoice.then(t=>{t.outcome==="accepted"?h.classList.add("hidden"):console.log("User dismissed the install prompt"),d=null})})});function W(){_();const e=JSON.parse(localStorage.getItem("schedules")),t=localStorage.getItem("openedUserPreferences"),s=p(e.data);t||v(),S(s),J(e,s),R(),O(e,s)}W();j.addEventListener("click",v);C.addEventListener("click",k);U.addEventListener("click",$);x.addEventListener("click",G);D.forEach(e=>e.addEventListener("click",H));
