import{l as c}from"./style-DMd9yYrQ.js";import{v as d,c as r}from"./createToaster-C2rzx3Hn.js";const l=document.querySelector('[data-js="create-account-form"]'),s=document.querySelector('[type="submit"');document.querySelector('[data-js="logo"]').src=c;d().then(e=>{e?window.location.href="/app/":l.addEventListener("submit",m)});async function m(e){e.preventDefault();const a=new FormData(e.target),n=JSON.stringify({email:a.get("email"),password:a.get("password")});u();const i=await fetch("http://localhost:3000/auth/register",{body:n,method:"POST",headers:{"Content-Type":"application/json"}});if(f(),i.ok){const{token:t}=await i.json();r("Login efetuado com sucesso"),localStorage.setItem("token",t),setTimeout(()=>{window.location.href="/app/"},2e3)}else{const{message:t}=await i.json();let o="";t==="missing fields"&&(o="Digite e-mail e senha"),t==="short password"&&(o="Senha muito curta"),t==="invalid email"&&(o="E-mail inválido"),t==="email registered"&&(o="E-mail já registrado"),t==="server error"&&(o="Erro ao acessar banco de dados"),r(o,"error")}}function u(){const[e,a]=s.children;s.disabled=!0,s.classList.add("opacity-70"),e.classList.remove("hidden"),a.classList.add("opacity-0")}function f(){const[e,a]=s.children;s.disabled=!1,s.classList.add("opacity-100"),e.classList.add("hidden"),a.classList.remove("opacity-0")}
